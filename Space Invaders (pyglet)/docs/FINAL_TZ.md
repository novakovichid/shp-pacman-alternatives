# Space Invaders (pyglet) — техническое задание

> ℹ️ В репозитории размещён только каркас проекта. Требования ниже описывают конечную версию игры, которую предстоит реализовать по задачам из каталога `tasks/`.

## 1. Назначение и цели
Space Invaders (pyglet) — учебная 2D-аркада, в которой игрок управляет кораблём, отражая волны противников. Цель — закрепить ООП-подход к построению игрового цикла и архитектуры, освоить работу с библиотекой pyglet и обработку пользовательских событий.

Цели команды:
- построить модульную игру со слоями core/services/storage/ui;
- реализовать динамику волн врагов, стрельбу, столкновения, подсчёт очков;
- обеспечить сохранение рекорда и простое меню; 
- подготовить отчётность и документацию для игроков.

## 2. Роли и сценарии
Основной пользователь — игрок. Он взаимодействует с игрой через клавиатуру и меню:
- запуск новой игры, продолжение после паузы;
- управление кораблём (влево, вправо, огонь);
- использование бонусов (щит, ускоритель);
- просмотр счёта, оставшихся жизней, уровня;
- запись рекорда и отображение таблицы лидеров;
- выход в главное меню и просмотр справки.

## 3. Архитектура
```
main.py ─▶ SpaceInvadersApplication ─▶ GameWindow (ui)
                                       ├─▶ GameService (services)
                                       │     └─▶ GameWorld (core)
                                       │           ├─▶ PlayerShip / Enemy / Projectile (core)
                                       │           └─▶ Wave (core)
                                       └─▶ HighscoreRepository (storage)
```

- **core**: модели игровых объектов, логика движения, столкновений, управления волнами.
- **services**: игровой цикл, обновление состояния, генерация волн, обработка событий.
- **storage**: чтение и запись рекордных очков, загрузка манифеста ресурсов.
- **ui**: создание окна pyglet, отрисовка спрайтов, реакция на ввод.

## 4. Требования к функциональности
- Игровой процесс:
  - Игрок управляет кораблём на нижнем краю экрана, стреляет одиночными снарядами.
  - Враги движутся по волнам, меняют направление при столкновении с границами, постепенно опускаются вниз.
  - При попадании по врагу начисляются очки, уничтоженный враг исчезает.
  - Если враг достигает нижней границы или сталкивается с игроком — игрок теряет жизнь.
  - Появляются бонусные корабли с увеличенным количеством очков.
  - Волны усложняются с повышением уровня (скорость, количество рядов, частота выстрелов врагов).
- Игрок располагает несколькими жизнями, отображаемыми на панели состояния.
- При потере всех жизней запускается экран окончания игры с показом финального счёта и рекорда.
- Меню паузы с опциями "Продолжить", "Новая игра", "Выход".
- Сохранение максимального счёта в файле `saves/highscore.txt`.
- Настройки (скорость игрока, количество жизней, параметры волн) задаются в `settings.py`.
- Обработка клавиш: стрелки или A/D для перемещения, пробел для выстрела, Esc для паузы.
- Простая система частиц или анимаций (мигание, вспышки) при уничтожении врагов.
- Отображение краткой справки по управлению в верхней части окна.

## 5. UX-требования
- Окно 800x600, фон с градиентом или изображением космоса.
- Частота обновления — 60 кадров в секунду.
- Чёткая визуализация: разные цвета для снарядов игрока и врагов.
- На HUD отображаются: счёт, рекорд, уровень, количество жизней.
- Анимации врагов синхронизированы с кадровой частотой, без рывков.
- При паузе игра затемняет поле и выводит меню поверх.
- Игрок получает звуковую обратную связь при выстреле, попадании и потере жизни.

## 6. Нефункциональные требования
- Код организован по принципам ООП, без глобальных синглтонов.
- Компоненты UI не обращаются напрямую к файлам — только через сервисы и хранилища.
- Используются ресурсы pyglet (спрайты, звуки) без сторонних движков.
- Производительность: стабильные 60 FPS на стандартном оборудовании с минимальными ресурсами.
- Нет сетевой или онлайн-функциональности.
- Все пути к ресурсам вычисляются относительно корня проекта.

## 7. Минимальные артефакты
- Каталоги `assets/` и `saves/` создаются автоматически при запуске.
- Файл `saves/highscore.txt` с сохранённым числом очков.
- Набор спрайтов (PNG) для корабля игрока, врагов, снарядов, анимаций.
- Файл `docs/controls.md` (создаётся задачей) с описанием управления.
- README и таблица задач (starter/advanced).

## 8. Границы проекта
- Нет сетевого режима или кооператива.
- Нет поддержки контроллеров — только клавиатура.
- Нет сложных шейдеров, 3D-графики, физики.
- Нет внутриигровых покупок и сохранения прогресса уровней.

## 9. Критерии приёмки
- Запуск `python main.py` открывает окно pyglet, отображает меню и стартовую волну врагов.
- Игрок может двигаться и стрелять, враги реагируют на попадания.
- Коллизии корректны, очки начисляются, жизни уменьшаются.
- Пауза останавливает движение объектов, возобновление возвращает игру в активный режим.
- Рекорд сохраняется и отображается при следующем запуске.
- Структура каталогов и код соответствуют описанной архитектуре.
